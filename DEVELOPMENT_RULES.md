# 🚀 개발 진행 룰

## 📋 필수 준수 사항

### 1. 작업 단위별 진행
- **tasks.md**의 각 단계를 하나씩 순서대로 진행
- 한 번에 하나의 작업만 집중해서 완료
- 작업 완료 시 tasks.md에서 체크박스 업데이트

### 2. 빌드 테스트 필수
- 각 작업 완료 후 **반드시** `npm run build` 실행
- 빌드 성공 확인 후에만 다음 단계 진행
- 빌드 실패 시 즉시 문제 해결

### 3. 커밋 규칙
- 빌드 테스트 통과 후 **반드시** 커밋
- 커밋 메시지 형식: `feat: [작업 내용] - 단계 X 완료`
- 예시: `feat: 댓글 시스템 구현 - 단계 10 완료`

### 4. 환경 변수 보안
- `.env.local`, `config.cfg` 등 민감한 정보는 **절대 커밋 금지**
- `.gitignore`에 포함되어 있는지 항상 확인

## 🔧 코드 일관성 및 유지보수 규칙

### 1. 파일 구조 및 네이밍 규칙
- **컴포넌트**: PascalCase (예: `ReviewCard.tsx`, `UserProfile.tsx`)
- **페이지**: kebab-case 폴더 + `page.tsx` (예: `reviews/[id]/page.tsx`)
- **API 라우트**: kebab-case + `route.ts` (예: `api/reviews/route.ts`)
- **서비스/유틸리티**: camelCase (예: `reviewService.ts`, `errorHandler.ts`)
- **타입 정의**: PascalCase interface/type (예: `User`, `ReviewData`)

### 2. 코드 스타일 통일
- **TypeScript 필수**: 모든 파일에서 타입 정의 사용
- **에러 처리**: 모든 API 호출과 비동기 작업에 try-catch 적용
- **로딩 상태**: 모든 비동기 작업에 로딩 상태 관리
- **권한 검증**: 모든 보호된 기능에 권한 체크 로직 포함

### 3. 컴포넌트 구조 규칙
```typescript
// 1. 타입 정의
interface ComponentProps {
  // props 타입
}

// 2. 컴포넌트 함수
export default function ComponentName({ props }: ComponentProps) {
  // 3. 상태 관리 (useState, useEffect 등)
  // 4. 커스텀 훅 사용
  // 5. 이벤트 핸들러
  // 6. JSX 반환
}
```

### 4. API 라우트 구조 규칙
```typescript
// 1. 필요한 imports
// 2. 타입 정의
// 3. 권한 검증 함수
// 4. HTTP 메서드별 핸들러 (GET, POST, PUT, DELETE)
// 5. 에러 처리 및 응답 반환
```

### 5. 서비스 레이어 규칙
- **단일 책임**: 각 서비스는 하나의 도메인만 담당
- **에러 처리**: 모든 Firebase 작업에 에러 처리 포함
- **타입 안전성**: 입력/출력 모두 타입 정의
- **캐싱**: 자주 조회되는 데이터는 캐싱 전략 적용

### 6. 상태 관리 규칙
- **로컬 상태**: 컴포넌트 내부에서만 사용되는 상태는 useState
- **전역 상태**: 여러 컴포넌트에서 공유하는 상태는 Context API
- **서버 상태**: API 데이터는 적절한 캐싱과 함께 관리
- **폼 상태**: 복잡한 폼은 useForm 훅 활용

### 7. 테스트 작성 규칙
- **단위 테스트**: 모든 유틸리티 함수와 서비스 로직
- **컴포넌트 테스트**: 주요 UI 컴포넌트의 렌더링과 상호작용
- **통합 테스트**: API 엔드포인트와 데이터베이스 연동
- **E2E 테스트**: 주요 사용자 플로우

### 8. 성능 최적화 규칙
- **이미지**: 모든 이미지는 최적화 후 사용
- **번들 크기**: 불필요한 라이브러리 import 금지
- **렌더링**: 불필요한 리렌더링 방지 (React.memo, useMemo, useCallback)
- **데이터 로딩**: 필요한 데이터만 로드 (페이지네이션, 무한 스크롤)

### 9. 보안 규칙
- **입력 검증**: 모든 사용자 입력에 대한 검증
- **권한 체크**: 클라이언트와 서버 양쪽에서 권한 검증
- **민감 데이터**: 로그에 민감한 정보 출력 금지
- **CORS**: API 엔드포인트에 적절한 CORS 설정

### 10. 문서화 규칙
- **주석**: 복잡한 로직에는 설명 주석 추가
- **README**: 새로운 기능 추가 시 README 업데이트
- **API 문서**: 새로운 API 엔드포인트는 문서화
- **변경 로그**: 중요한 변경사항은 CHANGELOG에 기록

## 🔄 변경 작업 시 체크리스트

### 기능 수정/추가 시
- [ ] `maintenance-requirements.md`에서 관련 파일 확인
- [ ] 관련된 모든 파일 (컴포넌트, API, 서비스, 테스트) 업데이트
- [ ] 타입 정의 업데이트 (`src/types/index.ts`)
- [ ] 권한 검증 로직 확인
- [ ] 에러 처리 로직 확인
- [ ] 테스트 코드 업데이트
- [ ] 빌드 테스트 통과 확인
- [ ] 관련 문서 업데이트

### 데이터 모델 변경 시
- [ ] `src/types/index.ts` 업데이트
- [ ] Firebase 컨버터 업데이트 (`src/lib/firebase/converters.ts`)
- [ ] 보안 규칙 검토 (`firestore.rules`)
- [ ] 관련 서비스 로직 업데이트
- [ ] 마이그레이션 스크립트 작성 (필요시)
- [ ] 테스트 데이터 업데이트

### UI/UX 변경 시
- [ ] 반응형 디자인 확인
- [ ] 접근성 (a11y) 확인
- [ ] 로딩 상태 처리
- [ ] 에러 상태 처리
- [ ] 다크모드 지원 (해당시)
- [ ] 브라우저 호환성 확인

### API 변경 시
- [ ] 권한 검증 로직 포함
- [ ] 입력 데이터 검증
- [ ] 에러 응답 정의
- [ ] 로깅 추가
- [ ] 레이트 리미팅 고려
- [ ] API 문서 업데이트

## 🔄 작업 플로우

```
1. tasks.md에서 다음 작업 확인
   ↓
2. 해당 작업 구현
   ↓
3. npm run build 실행
   ↓
4. 빌드 성공 확인
   ↓
5. git add . && git commit
   ↓
6. tasks.md 체크박스 업데이트
   ↓
7. 다음 작업으로 이동
```

## 📊 현재 진행 상황
- **완료**: 23/24 단계 (95.8%)
- **남은 작업**: 24단계 - 배포 진행

## 🎯 현재 목표
**24단계: 배포 진행**
- Firebase 로그인 및 설정
- Vercel 배포
- 환경 변수 설정
- 도메인 연결

## 📚 참고 문서
- **유지보수 가이드**: `maintenance-requirements.md`
- **배포 가이드**: `docs/DEPLOYMENT.md`
- **테스트 가이드**: `TESTING_DEPLOYMENT_GUIDE.md`
- **보안 문서**: `SECURITY.md`

---
*이 룰을 항상 기억하고 준수하여 안정적인 개발을 진행하자! 🚀*